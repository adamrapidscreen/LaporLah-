# E10-S4: Build All Toast Notifications

## Description
Configure shadcn toast/sonner integration and add toast notification calls across the application for key user actions: report creation, comment posting, following/unfollowing, voting, badge unlocking, and error states. Toasts are triggered from Client Components after server actions return.

## Dependencies
- Stories: E1-S1 (shadcn toast component installed)
- Files: `src/components/ui/toast.tsx` or `src/components/ui/sonner.tsx`, `src/app/layout.tsx`

## Tasks
1. `src/app/layout.tsx`: Add `<Toaster />` component from shadcn (sonner) to the root layout
2. `src/components/reports/create-report-form.tsx`: Add success toast after report creation ‚Äî "Laporan berjaya dihantar!" (Report successfully submitted!)
3. `src/components/comments/comment-form.tsx`: Add success toast after comment posted ‚Äî "Komen berjaya dihantar" (Comment successfully posted)
4. `src/components/shared/follow-button.tsx`: Add toast on follow ‚Äî "Anda kini mengikuti laporan ini" (You are now following this report), on unfollow ‚Äî "Berhenti mengikuti" (Unfollowed)
5. `src/components/confirmation/vote-panel.tsx`: Add toast after vote ‚Äî "Undian anda telah direkodkan" (Your vote has been recorded)
6. `src/components/gamification/badge-notification.tsx`: Add toast on badge unlock ‚Äî "üèÜ Tahniah! Anda dapat lencana: [badge name]" (Congratulations! You earned badge: [name])
7. Add error toast pattern: "Sesuatu telah berlaku" (Something went wrong) for all failed server actions

## Implementation Notes

### Root Layout Toaster Setup
```tsx
// src/app/layout.tsx ‚Äî add Toaster
import { Toaster } from '@/components/ui/sonner';

export default function RootLayout({ children }: { children: React.ReactNode }) {
  return (
    <html lang="ms">
      <body>
        {children}
        <Toaster position="top-center" richColors />
      </body>
    </html>
  );
}
```

### Toast Usage Pattern
```tsx
// In any Client Component
import { toast } from 'sonner';

// Success toast
const handleSubmit = async () => {
  const result = await createReport(formData);
  if (result?.error) {
    toast.error('Sesuatu telah berlaku', {
      description: result.error,
    });
  } else {
    toast.success('Laporan berjaya dihantar!');
  }
};
```

### Toast Messages Reference
| Action | Type | Malay Message | English Translation |
|--------|------|--------------|---------------------|
| Report created | success | "Laporan berjaya dihantar!" | Report successfully submitted |
| Comment posted | success | "Komen berjaya dihantar" | Comment successfully posted |
| Report followed | success | "Anda kini mengikuti laporan ini" | You are now following this report |
| Report unfollowed | info | "Berhenti mengikuti" | Unfollowed |
| Vote cast | success | "Undian anda telah direkodkan" | Your vote has been recorded |
| Badge unlocked | success | "üèÜ Tahniah! Anda dapat lencana: {name}" | Congratulations! You earned badge |
| Error (generic) | error | "Sesuatu telah berlaku" | Something went wrong |
| Flag submitted | success | "Laporan bendera berjaya dihantar" | Flag report submitted |
| Admin action | success | "Tindakan berjaya" | Action successful |

### Error Toast Pattern
```tsx
// Reusable error handler
function handleActionError(result: { error: string | null } | undefined) {
  if (result?.error) {
    toast.error('Sesuatu telah berlaku', {
      description: result.error,
    });
    return true;
  }
  return false;
}
```

### Sonner Configuration
```tsx
<Toaster
  position="top-center"
  richColors
  toastOptions={{
    duration: 3000,
    className: 'text-sm',
  }}
/>
```

## Acceptance Criteria
- [ ] `<Toaster />` component is added to root layout
- [ ] Success toast shows after report creation with Malay text
- [ ] Success toast shows after comment posting
- [ ] Toast shows on follow/unfollow toggle
- [ ] Toast shows after community vote is cast
- [ ] Toast shows on badge unlock with badge name
- [ ] Error toast shows when any server action fails
- [ ] Toast messages are in Malay language
- [ ] Toasts use sonner's `richColors` for success/error distinction
- [ ] Toasts auto-dismiss after ~3 seconds
- [ ] Toast position is top-center for mobile visibility
- [ ] All toast calls are in Client Components only
