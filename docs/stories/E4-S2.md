# E4-S2: Build Status Stepper Component

## Description
Create a reusable status stepper component that visualizes the report status progression as horizontal dots with bilingual labels, along with a status constants file defining the status flow.

## Dependencies
- Stories: E1-S5 (design tokens and Tailwind theme)
- Files: `src/components/ui/` (shadcn primitives)

## Tasks
1. `src/lib/constants/statuses.ts`: Create status flow array and bilingual label definitions with the full status configuration (colors, labels, ordering).
2. `src/components/reports/status-stepper.tsx`: Create Client Component that renders horizontal progress dots with connecting lines and bilingual labels. Implement three visual states: completed, current, and upcoming.

## Implementation Notes

### Status Constants
```tsx
// src/lib/constants/statuses.ts
export const STATUS_FLOW = [
  'open',
  'acknowledged',
  'in_progress',
  'resolved',
  'closed',
] as const;

export type ReportStatus = (typeof STATUS_FLOW)[number];

export const statusConfig: Record<
  ReportStatus,
  { bg: string; text: string; label: string; labelMs: string }
> = {
  open:         { bg: 'bg-blue-500/15',    text: 'text-blue-400',    label: 'Open',        labelMs: 'Dibuka' },
  acknowledged: { bg: 'bg-purple-500/15',  text: 'text-purple-400',  label: 'Ack\'d',      labelMs: 'Diakui' },
  in_progress:  { bg: 'bg-amber-500/15',   text: 'text-amber-400',   label: 'In Progress', labelMs: 'Dalam Proses' },
  resolved:     { bg: 'bg-emerald-500/15', text: 'text-emerald-400', label: 'Resolved',    labelMs: 'Diselesaikan' },
  closed:       { bg: 'bg-gray-500/15',    text: 'text-gray-400',    label: 'Closed',      labelMs: 'Ditutup ✓' },
};

export function getStatusIndex(status: ReportStatus): number {
  return STATUS_FLOW.indexOf(status);
}
```

### Status Stepper Component
```tsx
// src/components/reports/status-stepper.tsx
'use client';

import { cn } from '@/lib/utils';
import { STATUS_FLOW, statusConfig, getStatusIndex, type ReportStatus } from '@/lib/constants/statuses';

interface StatusStepperProps {
  currentStatus: ReportStatus;
}

export function StatusStepper({ currentStatus }: StatusStepperProps) {
  const currentIndex = getStatusIndex(currentStatus);

  return (
    <div className="flex items-center gap-1">
      {STATUS_FLOW.map((status, index) => {
        const config = statusConfig[status];
        const isCompleted = index < currentIndex;
        const isCurrent = index === currentIndex;
        const isUpcoming = index > currentIndex;

        return (
          <div key={status} className="flex items-center">
            {/* Dot */}
            <div className="flex flex-col items-center gap-1">
              <div
                className={cn(
                  'h-3 w-3 rounded-full border-2 transition-all',
                  isCompleted && 'border-primary bg-primary',
                  isCurrent && 'border-primary bg-primary animate-pulse',
                  isUpcoming && 'border-muted bg-transparent'
                )}
              />
              <span className={cn(
                'text-[10px] leading-tight text-center',
                isCurrent ? config.text : 'text-muted-foreground'
              )}>
                {config.labelMs}
              </span>
            </div>
            {/* Connecting line */}
            {index < STATUS_FLOW.length - 1 && (
              <div
                className={cn(
                  'mx-1 h-0.5 w-6',
                  index < currentIndex ? 'bg-primary' : 'border-t border-dashed border-muted'
                )}
              />
            )}
          </div>
        );
      })}
    </div>
  );
}
```

### CSS Animation (in globals.css or Tailwind config)
```css
/* status-pulse animation — uses Tailwind's built-in animate-pulse */
/* The animate-pulse class from Tailwind provides the pulsing effect for the current status dot */
```

### Design Specifications
- Completed steps: filled dot + solid connecting line in primary color
- Current step: pulsing animation (Tailwind `animate-pulse`), primary fill
- Upcoming steps: hollow dot (border only) + dashed connecting line in muted color
- Labels: 10px font, bilingual (Malay shown by default), centered under dot
- Dots: 12px (h-3 w-3), rounded-full, 2px border
- Connecting lines: 24px wide (w-6), 2px height

## Acceptance Criteria
- [ ] Status stepper renders all 5 status dots horizontally
- [ ] Completed statuses show filled dots with solid primary-colored connecting lines
- [ ] Current status dot has pulsing animation
- [ ] Upcoming statuses show hollow dots with dashed muted connecting lines
- [ ] Bilingual labels display under each dot
- [ ] Component accepts `currentStatus` prop and renders correctly for all 5 statuses
- [ ] `src/lib/constants/statuses.ts` exports `STATUS_FLOW`, `statusConfig`, `getStatusIndex`, and `ReportStatus` type
- [ ] Status config includes correct colors matching design system spec
- [ ] Component is a Client Component with 'use client' directive
