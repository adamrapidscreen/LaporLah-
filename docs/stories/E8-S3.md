# E8-S3: Build Badge Card Component

## Description
Create the badge card component that displays an individual badge with its emoji, name, tier indicator, flair text, and progress bar toward the next tier. Also create the points display component. These components are used on the profile page and in other gamification UI surfaces.

## Dependencies
- Stories: E8-S1 (badge constants and tier colors)
- Files: `src/lib/constants/badges.ts`, `src/lib/utils.ts`

## Tasks
1. `src/components/gamification/badge-card.tsx`: Create component displaying:
   - Badge emoji icon (large, centered or left-aligned)
   - Badge name (font-semibold)
   - Tier indicator with colored border using tier-specific colors from `TIER_COLORS`
   - Flair text (italic, muted-foreground)
   - Progress bar to next tier: primary fill on muted track, rounded-full h-1.5
   - Progress count text (e.g., "12/15 reports")
   - Handle "maxed out" state when gold tier is achieved (full bar, no "next" text)
2. `src/components/gamification/points-display.tsx`: Create component showing total points with a label, styled as a prominent counter
3. `src/components/gamification/streak-display.tsx`: Verify/update the streak display component (created in E8-S2) if any adjustments are needed

## Implementation Notes

### Badge Card Component
```tsx
// src/components/gamification/badge-card.tsx
import { BADGE_DEFINITIONS, TIER_COLORS, type BadgeType, type BadgeTier } from '@/lib/constants/badges';
import { cn } from '@/lib/utils';

interface BadgeCardProps {
  badgeType: BadgeType;
  tier: BadgeTier;
  currentCount: number;
}

export function BadgeCard({ badgeType, tier, currentCount }: BadgeCardProps) {
  const badge = BADGE_DEFINITIONS[badgeType];
  const tierColor = TIER_COLORS[tier];
  const flair = badge.flair[tier];

  // Calculate progress to next tier
  const tiers: BadgeTier[] = ['bronze', 'silver', 'gold'];
  const currentTierIndex = tiers.indexOf(tier);
  const nextTier = currentTierIndex < 2 ? tiers[currentTierIndex + 1] : null;
  const nextThreshold = nextTier ? badge.thresholds[nextTier] : badge.thresholds[tier];
  const currentThreshold = badge.thresholds[tier];
  const isMaxed = tier === 'gold';

  // Progress calculation
  const progressMax = nextThreshold;
  const progressPercent = isMaxed
    ? 100
    : Math.min((currentCount / nextThreshold) * 100, 100);

  return (
    <div className={cn('border-2 rounded-lg p-4 space-y-2', tierColor.border, tierColor.bg)}>
      <div className="flex items-center gap-3">
        <span className="text-2xl">{badge.emoji}</span>
        <div>
          <p className="font-semibold">{badge.name}</p>
          <p className={cn('text-xs font-medium uppercase', tierColor.text)}>{tier}</p>
        </div>
      </div>

      <p className="text-sm italic text-muted-foreground">{flair}</p>

      {/* Progress bar */}
      <div className="space-y-1">
        <div className="h-1.5 w-full rounded-full bg-muted overflow-hidden">
          <div
            className="h-full rounded-full bg-primary transition-all duration-500"
            style={{ width: `${progressPercent}%` }}
          />
        </div>
        <p className="text-xs text-muted-foreground">
          {isMaxed
            ? `${currentCount} ${badge.metric} — Tahap tertinggi!`
            : `${currentCount}/${nextThreshold} ${badge.metric}`}
        </p>
      </div>
    </div>
  );
}
```

### Points Display Component
```tsx
// src/components/gamification/points-display.tsx
import { cn } from '@/lib/utils';

interface PointsDisplayProps {
  points: number;
  className?: string;
}

export function PointsDisplay({ points, className }: PointsDisplayProps) {
  return (
    <div className={cn('flex items-center gap-2', className)}>
      <span className="text-lg">⭐</span>
      <span className="font-mono text-xl font-bold text-primary">{points.toLocaleString()}</span>
      <span className="text-xs text-muted-foreground uppercase tracking-wider">mata</span>
    </div>
  );
}
```

### Styling Details
- Badge card border: 2px in tier color (`border-amber-700` for bronze, `border-slate-400` for silver, `border-yellow-500` for gold)
- Badge card background: tier color at 10% opacity (`bg-amber-700/10`, `bg-slate-400/10`, `bg-yellow-500/10`)
- Progress bar track: `bg-muted rounded-full h-1.5`
- Progress bar fill: `bg-primary rounded-full` with transition animation
- Flair text: `text-sm italic text-muted-foreground`
- Tier label: `text-xs font-medium uppercase` in tier color
- Gold maxed state: full progress bar with "Tahap tertinggi!" (Highest level!)

### Progress Bar Logic
- Bronze → next target is silver threshold
- Silver → next target is gold threshold
- Gold → bar is 100% filled, shows "Tahap tertinggi!" message
- Percentage: `(currentCount / nextThreshold) * 100`, capped at 100

### Localization
- "Tahap tertinggi!" = "Highest level!" (for gold badge)
- "mata" = "points"

## Acceptance Criteria
- [ ] Badge card renders emoji, name, tier indicator, and flair text
- [ ] Badge card border uses tier-specific color (bronze/silver/gold from TIER_COLORS)
- [ ] Badge card background uses tier color at 10% opacity
- [ ] Progress bar shows primary fill on muted track with h-1.5 height
- [ ] Progress bar is rounded-full
- [ ] Progress count shows "X/Y {metric}" format (e.g., "12/15 reports")
- [ ] Gold tier shows "Tahap tertinggi!" with 100% progress bar
- [ ] Points display shows formatted points with star emoji
- [ ] Points display uses font-mono text-xl font-bold text-primary styling
- [ ] All components use named exports (per coding standards)
- [ ] Components accept `className` prop where appropriate for style overrides
