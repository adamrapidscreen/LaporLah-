# E6-S5: Build "My Followed Reports" Page

## Description
Create a Server Component page that displays all reports the current user is following, rendered using the existing report card component. Includes a loading skeleton and empty state for users with no followed reports.

## Dependencies
- Stories: E3-S5 (report card component), E6-S2 (follows server action / follows table)
- Files: `src/components/reports/report-card.tsx`, database `follows` and `reports` tables

## Tasks
1. `src/app/followed/page.tsx`: Create Server Component that fetches all reports where the current user has a follow row. Join with report data and user data. Order by newest follow first. Render using the existing `ReportCard` component. Show empty state if no followed reports.
2. `src/app/followed/loading.tsx`: Create loading skeleton matching the followed reports page layout (grid of card skeletons).

## Implementation Notes

### Followed Reports Page
```tsx
// src/app/followed/page.tsx
import { createServerClient } from '@/lib/supabase/server';
import { redirect } from 'next/navigation';
import { ReportCard } from '@/components/reports/report-card';

export default async function FollowedReportsPage() {
  const supabase = await createServerClient();
  const { data: { user } } = await supabase.auth.getUser();
  if (!user) redirect('/login');

  // Fetch reports the user follows, ordered by newest follow first
  const { data: follows } = await supabase
    .from('follows')
    .select('report:reports(*, user:users(id, name, avatar_url))')
    .eq('user_id', user.id)
    .order('created_at', { ascending: false });

  const reports = follows
    ?.map((f) => f.report)
    .filter(Boolean) ?? [];

  return (
    <div className="mx-auto max-w-2xl p-4">
      <h1 className="mb-4 text-xl font-bold">
        Laporan Diikuti / My Followed Reports
      </h1>

      {reports.length === 0 ? (
        <div className="py-12 text-center">
          <p className="text-sm text-muted-foreground">
            Anda belum mengikuti sebarang laporan.
          </p>
          <p className="mt-1 text-sm text-muted-foreground">
            You haven&apos;t followed any reports yet.
          </p>
        </div>
      ) : (
        <div className="space-y-4">
          {reports.map((report) => (
            <ReportCard key={report.id} report={report} />
          ))}
        </div>
      )}
    </div>
  );
}
```

### Loading Skeleton
```tsx
// src/app/followed/loading.tsx
import { Skeleton } from '@/components/ui/skeleton';

export default function FollowedReportsLoading() {
  return (
    <div className="mx-auto max-w-2xl space-y-4 p-4">
      <Skeleton className="h-8 w-56" />
      {Array.from({ length: 4 }).map((_, i) => (
        <div key={i} className="space-y-3 rounded-lg border p-4">
          <Skeleton className="aspect-video w-full rounded-md" />
          <Skeleton className="h-5 w-3/4" />
          <div className="flex gap-2">
            <Skeleton className="h-5 w-16 rounded-full" />
            <Skeleton className="h-5 w-20 rounded-full" />
          </div>
          <Skeleton className="h-4 w-full" />
          <Skeleton className="h-4 w-2/3" />
        </div>
      ))}
    </div>
  );
}
```

### Query Strategy
- Join through `follows` → `reports` → `users` to get full report data with creator info
- Order by `follows.created_at` descending (most recently followed first)
- Filter out any null reports (in case a report was deleted)
- Reuse the existing `ReportCard` component for consistent display

### Empty State Design
- Centered text, bilingual (Malay + English)
- `text-muted-foreground`, `py-12` for breathing room
- No action button (user can navigate to the feed to find reports)

### Page Layout
- Max width: `max-w-2xl`, centered with `mx-auto`
- Padding: `p-4`
- Card spacing: `space-y-4`
- Title: `text-xl font-bold`, bilingual

## Acceptance Criteria
- [ ] Followed reports page renders at `/followed` for authenticated users
- [ ] Redirects to `/login` for unauthenticated users
- [ ] Fetches reports through the `follows` table joined with `reports` and `users`
- [ ] Reports are ordered by most recently followed first
- [ ] Each report renders using the existing `ReportCard` component
- [ ] Empty state shows bilingual message when user has no followed reports
- [ ] Loading skeleton displays while data is being fetched
- [ ] Page is a Server Component (no 'use client' directive)
- [ ] Page layout uses `max-w-2xl` centered container
- [ ] Null/deleted reports are filtered out gracefully
