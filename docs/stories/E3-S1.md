# E3-S1: Build Report Creation Form

## Description
Build the create report form as a Client Component with title, description, and category fields. Validate inputs with Zod on submit and wire to the `createReport` server action. The form is the core data-entry surface for LaporLah.

## Dependencies
- Stories: E1-S5, E2-S3
- Files: `src/app/layout.tsx`, `src/styles/globals.css`, `src/lib/utils/cn.ts`, `src/components/layout/nav-wrapper.tsx`

## Tasks
1. `src/components/reports/report-form.tsx`: Create Client Component with title input (required, max 100 chars), description textarea (required, max 2000 chars), category select with bilingual labels. Validate with Zod on submit. Wire to `createReport` server action via `useActionState` / `useFormState`
2. `src/app/report/new/page.tsx`: Create the "New Report" page that renders the `ReportForm` component with appropriate page header
3. `src/lib/constants/categories.ts`: Create categories constant with bilingual labels

## Implementation Notes

### Report Form (`src/components/reports/report-form.tsx`)
```typescript
'use client';

import { useActionState } from 'react';

import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { Textarea } from '@/components/ui/textarea';
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from '@/components/ui/select';

import { CATEGORIES } from '@/lib/constants/categories';
import { createReport } from '@/lib/actions/reports';

interface ReportFormProps {
  // Will be extended in later stories for photo + location
}

export function ReportForm({}: ReportFormProps) {
  const [state, formAction, isPending] = useActionState(createReport, { error: null });

  return (
    <form action={formAction} className="space-y-4 px-4">
      {/* Title */}
      <div className="space-y-2">
        <label htmlFor="title" className="text-sm font-medium">
          Title
        </label>
        <Input
          id="title"
          name="title"
          placeholder="Brief description of the issue"
          maxLength={100}
          required
          className="bg-input"
        />
      </div>

      {/* Description */}
      <div className="space-y-2">
        <label htmlFor="description" className="text-sm font-medium">
          Description
        </label>
        <Textarea
          id="description"
          name="description"
          placeholder="Provide more details about the issue..."
          maxLength={2000}
          required
          rows={5}
          className="bg-input resize-none"
        />
      </div>

      {/* Category */}
      <div className="space-y-2">
        <label htmlFor="category" className="text-sm font-medium">
          Category
        </label>
        <Select name="category" required>
          <SelectTrigger className="bg-input">
            <SelectValue placeholder="Select category" />
          </SelectTrigger>
          <SelectContent>
            {CATEGORIES.map((cat) => (
              <SelectItem key={cat.value} value={cat.value}>
                {cat.label}
              </SelectItem>
            ))}
          </SelectContent>
        </Select>
      </div>

      {/* Error Display */}
      {state?.error && (
        <p className="text-sm text-destructive">{state.error}</p>
      )}

      {/* Submit */}
      <Button type="submit" disabled={isPending} className="w-full" size="lg">
        {isPending ? 'Menghantar...' : 'Hantar Laporan'}
      </Button>
    </form>
  );
}
```

### Categories Constant (`src/lib/constants/categories.ts`)
```typescript
export const CATEGORIES = [
  { value: 'infrastructure', label: 'Infrastructure / Infrastruktur' },
  { value: 'cleanliness', label: 'Cleanliness / Kebersihan' },
  { value: 'safety', label: 'Safety / Keselamatan' },
  { value: 'facilities', label: 'Facilities / Kemudahan' },
  { value: 'other', label: 'Other / Lain-lain' },
] as const;

export type CategoryValue = (typeof CATEGORIES)[number]['value'];
```

### New Report Page (`src/app/report/new/page.tsx`)
```typescript
import { ReportForm } from '@/components/reports/report-form';

export default function NewReportPage() {
  return (
    <div className="mx-auto max-w-lg py-6">
      <h1 className="px-4 text-xl font-bold mb-6">Lapor Isu Baru</h1>
      <ReportForm />
    </div>
  );
}
```

### Design Specifications
- Full width form with 16px side padding (`px-4`)
- Inputs: `bg-input`, `border-border`, `rounded-[var(--radius)]` (from shadcn defaults)
- Submit button: "Hantar Laporan", full width (`w-full`), `bg-primary`
- Loading state: Button disabled, text "Menghantar..."
- Error: `text-sm text-destructive` below form fields

### Zod Validation (in server action, E3-S4)
```typescript
const createReportSchema = z.object({
  title: z.string().min(1).max(100),
  description: z.string().min(1).max(2000),
  category: z.enum(['infrastructure', 'cleanliness', 'safety', 'facilities', 'other']),
});
```

## Acceptance Criteria
- [ ] Form renders with title input, description textarea, and category select
- [ ] Title input enforces max 100 characters
- [ ] Description textarea enforces max 2000 characters
- [ ] Category select shows all 5 options with bilingual labels (e.g., "Infrastructure / Infrastruktur")
- [ ] Client-side HTML validation shows errors for empty required fields
- [ ] Server-side Zod validation errors display below the form
- [ ] Submit button shows "Hantar Laporan" and disables during submission
- [ ] Loading state shows "Menghantar..." text
- [ ] Form submits via `createReport` server action
- [ ] New report page accessible at `/report/new`
- [ ] Component uses `'use client'` directive
- [ ] Named export: `ReportForm`
