# E3-S6: Build Home Feed Page

## Description
Build the home feed page as a Server Component that fetches non-hidden reports ordered by newest first and renders them as a list of report cards. Also create a loading skeleton page for the streaming/Suspense experience.

## Dependencies
- Stories: E3-S4, E3-S5
- Files: `src/lib/actions/reports.ts` (or direct query), `src/components/reports/report-card.tsx`, `src/lib/supabase/server.ts`

## Tasks
1. `src/app/page.tsx`: Create/update home page as Server Component — fetch reports from Supabase (`is_hidden = false`, ordered by `created_at DESC`), join with creator data, render `ReportCard` list. Show empty state when no reports exist
2. `src/app/loading.tsx`: Create loading skeleton with shimmer cards matching the `ReportCard` layout
3. `src/components/shared/empty-state.tsx`: Create reusable empty state component with icon, title, and description
4. `src/components/shared/loading-skeleton.tsx`: Create reusable report card skeleton component

## Implementation Notes

### Home Page (`src/app/page.tsx`)
```typescript
import { createClient } from '@/lib/supabase/server';

import { ReportCard } from '@/components/reports/report-card';
import { EmptyState } from '@/components/shared/empty-state';

import type { Report } from '@/lib/types';

export default async function HomePage() {
  const supabase = await createClient();

  const { data: reports } = await supabase
    .from('reports')
    .select(`
      *,
      creator:users!user_id (
        id,
        full_name,
        avatar_url
      )
    `)
    .eq('is_hidden', false)
    .order('created_at', { ascending: false })
    .limit(20);

  if (!reports || reports.length === 0) {
    return (
      <div className="mx-auto max-w-lg px-4 py-8">
        <EmptyState
          title="No reports yet"
          description="Be the first to report an issue in your community!"
        />
      </div>
    );
  }

  return (
    <div className="mx-auto max-w-lg px-4 py-4">
      <div className="space-y-3">
        {(reports as Report[]).map((report) => (
          <ReportCard key={report.id} report={report} />
        ))}
      </div>
    </div>
  );
}
```

### Loading Skeleton (`src/app/loading.tsx`)
```typescript
import { ReportCardSkeleton } from '@/components/shared/loading-skeleton';

export default function HomeLoading() {
  return (
    <div className="mx-auto max-w-lg px-4 py-4">
      <div className="space-y-3">
        {Array.from({ length: 5 }).map((_, i) => (
          <ReportCardSkeleton key={i} />
        ))}
      </div>
    </div>
  );
}
```

### Report Card Skeleton (`src/components/shared/loading-skeleton.tsx`)
```typescript
import { Card } from '@/components/ui/card';
import { Skeleton } from '@/components/ui/skeleton';

export function ReportCardSkeleton() {
  return (
    <Card className="overflow-hidden">
      {/* Photo placeholder */}
      <Skeleton className="aspect-video w-full" />

      <div className="space-y-3 p-4">
        {/* Status + Category */}
        <div className="flex items-center gap-2">
          <Skeleton className="h-5 w-16 rounded-full" />
          <Skeleton className="h-5 w-20 rounded-md" />
        </div>

        {/* Title */}
        <Skeleton className="h-5 w-3/4" />

        {/* Description */}
        <div className="space-y-1">
          <Skeleton className="h-4 w-full" />
          <Skeleton className="h-4 w-2/3" />
        </div>

        {/* Footer */}
        <div className="flex items-center justify-between pt-1">
          <div className="flex items-center gap-2">
            <Skeleton className="h-6 w-6 rounded-full" />
            <Skeleton className="h-3 w-20" />
          </div>
          <Skeleton className="h-3 w-16" />
        </div>
      </div>
    </Card>
  );
}
```

### Empty State (`src/components/shared/empty-state.tsx`)
```typescript
import { FileSearch } from 'lucide-react';

interface EmptyStateProps {
  icon?: React.ElementType;
  title: string;
  description?: string;
}

export function EmptyState({
  icon: Icon = FileSearch,
  title,
  description,
}: EmptyStateProps) {
  return (
    <div className="flex flex-col items-center justify-center gap-3 py-16 text-center">
      <Icon className="h-12 w-12 text-muted-foreground/50" />
      <h3 className="text-lg font-semibold">{title}</h3>
      {description && (
        <p className="max-w-sm text-sm text-muted-foreground">{description}</p>
      )}
    </div>
  );
}
```

### Feed Layout
- Max width: `max-w-lg` (512px) — mobile-optimized
- Side padding: `px-4` (16px)
- Card gap: `space-y-3` (12px)
- Content padding: `py-4`

## Acceptance Criteria
- [ ] Home page fetches reports from Supabase where `is_hidden = false`
- [ ] Reports are ordered by `created_at DESC` (newest first)
- [ ] Each report includes joined creator data (name, avatar)
- [ ] Reports render as `ReportCard` components in a vertical list
- [ ] Empty state shows when no reports exist with icon, title, and description
- [ ] Feed is constrained to `max-w-lg` width with 16px side padding
- [ ] Card gap is 12px (`space-y-3`)
- [ ] `loading.tsx` renders 5 skeleton cards while data loads
- [ ] Skeleton cards match the `ReportCard` layout (photo, pills, title, description, footer)
- [ ] Skeletons use shadcn `Skeleton` component with shimmer animation
- [ ] Home page is a Server Component (no `'use client'`)
- [ ] Named exports: `ReportCardSkeleton`, `EmptyState`
