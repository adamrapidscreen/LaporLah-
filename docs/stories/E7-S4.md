# E7-S4: Build Countdown Timer Component

## Description
Create a Client Component that displays a live countdown timer showing the remaining time in the 72-hour community confirmation window. The timer calculates the difference between `resolved_at + 72h` and the current time, updates every minute, and shows "Pengundian tamat" (Voting ended) when the window expires.

## Dependencies
- Stories: E7-S1 (vote panel component)
- Files: `src/components/confirmation/vote-panel.tsx`

## Tasks
1. `src/components/confirmation/countdown.tsx`: Create Client Component that:
   - Accepts `resolvedAt` (ISO date string) prop
   - Calculates deadline as `resolvedAt + 72 hours`
   - Displays remaining time formatted as "Xj Ym lagi" (Xh Ym remaining) — using Malay abbreviations
   - Updates the display every 60 seconds via `setInterval`
   - Shows "Pengundian tamat" (Voting ended) when countdown reaches zero
   - Cleans up the interval on unmount
   - Styled in amber color as per design system

## Implementation Notes

### Component Structure
```tsx
// src/components/confirmation/countdown.tsx
'use client';

import { useState, useEffect } from 'react';
import { cn } from '@/lib/utils';

interface CountdownProps {
  resolvedAt: string;
  className?: string;
}

export function Countdown({ resolvedAt, className }: CountdownProps) {
  const [timeLeft, setTimeLeft] = useState<string>('');
  const [isExpired, setIsExpired] = useState(false);

  useEffect(() => {
    const deadline = new Date(resolvedAt).getTime() + 72 * 60 * 60 * 1000;

    const updateTimer = () => {
      const now = Date.now();
      const diff = deadline - now;

      if (diff <= 0) {
        setIsExpired(true);
        setTimeLeft('Pengundian tamat');
        return;
      }

      const hours = Math.floor(diff / (1000 * 60 * 60));
      const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
      setTimeLeft(`${hours}j ${minutes}m lagi`);
    };

    updateTimer(); // Initial calculation
    const interval = setInterval(updateTimer, 60_000); // Update every minute

    return () => clearInterval(interval);
  }, [resolvedAt]);

  return (
    <span
      className={cn(
        'text-xs font-medium',
        isExpired ? 'text-muted-foreground' : 'text-amber-600 dark:text-amber-400',
        className
      )}
    >
      ⏱ {timeLeft}
    </span>
  );
}
```

### Styling
- Active countdown: `text-amber-600 dark:text-amber-400` (amber color as per design system)
- Expired state: `text-muted-foreground`
- Font: `text-xs font-medium`
- Prefixed with ⏱ emoji for visual clarity

### Time Format
- Malay abbreviations: "j" for jam (hours), "m" for minit (minutes)
- Example outputs: "71j 45m lagi", "2j 10m lagi", "0j 5m lagi", "Pengundian tamat"

### Edge Cases
- If `resolvedAt` is in the future, timer still calculates correctly (72h from that timestamp)
- If page loads after 72h has passed, immediately shows "Pengundian tamat"
- Handles invalid date gracefully

## Acceptance Criteria
- [ ] Countdown component renders with remaining hours and minutes
- [ ] Timer updates every 60 seconds via `setInterval`
- [ ] Shows "Pengundian tamat" when 72 hours have elapsed
- [ ] Uses Malay time abbreviations ("Xj Ym lagi")
- [ ] Active timer text is amber colored (`text-amber-600`)
- [ ] Expired text uses `text-muted-foreground`
- [ ] Interval is cleaned up on component unmount (no memory leaks)
- [ ] Component uses 'use client' directive
- [ ] Named export `Countdown` (per coding standards)
- [ ] Accepts `className` prop for style overrides via `cn()`
